<!DOCTYPE html>
<html  xml:lang="en" lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>GlassFish Wiki : Substruct_on_glassfish_1Ja</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta http-equiv="content-language" content="en" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
        <link href="styles/docs.css" rel="stylesheet" />
        <link href="styles/site1.css" rel="stylesheet" />
        <style> a { color: #555555; } </style>
        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body class="page-documentation project-gfmvnsite" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="brand"><a href="/glassfish/index.html"><img src="../images/gflogo24.png"><span style="color:#E88A43;font-size:18px;padding-left:11px;padding-top:15px;font-weight:bold;">GlassFish</span> - <span style="font-size:18px;" class="gf-grey">World's first Java EE 7 Application Server</span></a></div>
                    <div class="nav-collapse">
                        <ul class="nav pull-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
									<li><a href="/glassfish/LICENSE" title="License">Legal </a></li>
									<li><a href="/glassfish/CONTRIBUTING" title="Contributing">Contributing </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <br/><br/>
        <div class="container"><body> 
 <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff"> 
  <tbody>
   <tr> 
    <td valign="top" class="pagebody">   <h4><a name="Substruct_on_glassfish_1Ja-SubstructonGlassFishv3RubyonRails%E3%81%A7%E6%9B%B8%E3%81%8B%E3%82%8C%E3%81%9F%E3%82%A4%E3%83%BC%E3%82%B3%E3%83%9E%E3%83%BC%E3%82%B9%E3%83%BB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"></a>Substruct on GlassFish v3 - Ruby-on-Rails で書かれた イーコマース・アプリケーション</h1> <h4><a name="Substruct_on_glassfish_1Ja-%E2%80%BB%E3%81%93%E3%81%AE%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AF%E7%BF%BB%E8%A8%B3%E4%B8%AD%E3%81%A7%E3%81%99%E2%80%BB"></a>※このページは翻訳中です※</h1> <p><span class="error">Cannot resolve external resource into attachment.</span></p> <p><a href="http://code.google.com/p/substruct/">Substruct</a> は <a href="http://rubyonrails.org/">Ruby-on-Rails</a> を使って書かれたオープンソースのイーコマース・プロジェクトで、シンプルなイーコマース用プラットフォームからコンテンツ管理システム、カスタマー・レスポンス・システムまでオールインワンで提供されています。</p> <p>このアプリケーションの事は、 <a href="http://javapassion.com/">Sang "Passion"</a> 内の Shin の <a href="http://www.javapassion.com/handsonlabs/rails_substruct_app/">実習 5542</a> （ <a href="http://blogs.oracle.com/arungupta/entry/free_20_week_ruby_on">2008 年 7 月 15 日に開始された 20 週間 Ruby on Rails 無料コースの一部</a>）で知りました。<br> Shin の実習では WEBrick/Mongrel を用いて配備を行っていますが、私は <a href="http://rubyforge.org/projects/glassfishgem/">GlassFish v3 Gem</a> を使ってこのアプリケーションを配備する手順について紹介したいと思います。 GlassFish gem のインストールについては、<a href="http://blogs.oracle.com/arungupta/entry/rails_glassfish_gem_0_3">こちら</a> で説明しています。</p> <p>1. Sunstruct をダウンロード＆インストール</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">~/samples/jruby &gt;gunzip -c substruct_rel_1-0-a3.tar.gz  | tar xvf -
substruct_rel_1-0-a3/
substruct_rel_1-0-a3/app/
substruct_rel_1-0-a3/app/controllers/
substruct_rel_1-0-a3/app/controllers/application.rb
. . .
substruct_rel_1-0-a3/vendor/rails/railties/test/rails_info_test.rb
substruct_rel_1-0-a3/vendor/rails/railties/test/secret_key_generation_test.rb
substruct_rel_1-0-a3/vendor/rails/Rakefile
substruct_rel_1-0-a3/vendor/rails/release.rb</pre> 
       </div> 
      </div>
     </div> <p>2. Substruct に必要な gem をインストール</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">~/samples/jruby &gt;~/testbed/jruby-1.1.2/bin/jruby -S gem install RedCloth fastercsv mime-types mini_magick ezcrypto jruby-openssl --no-ri --no-rdoc
JRuby limited openssl loaded. gem install jruby-openssl for full support.
http://wiki.jruby.org/wiki/JRuby_Builtin_OpenSSL
Bulk updating Gem source index for: http://gems.rubyforge.org/
Successfully installed RedCloth-3.0.4
Successfully installed fastercsv-1.2.3
Successfully installed mime-types-1.15
Successfully installed rubyforge-1.0.0
Successfully installed hoe-1.5.3
Successfully installed mini_magick-1.2.3
Successfully installed ezcrypto-0.7
Successfully installed jruby-openssl-0.2.3
8 gems installed</pre> 
       </div> 
      </div>
     </div> <p>3. データベースを作成</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">~/samples/jruby/substruct_rel_1-0-a3 &gt;~/testbed/jruby-1.1.2/bin/jruby -S rake db:create
(in /Users/arungupta/samples/jruby/substruct_rel_1-0-a3)
[SUBSTRUCT WARNING]
Mail server settings have not been initialized.
Check to make sure they've been set in the admin panel.</pre> 
       </div> 
      </div>
     </div> <p>4. そして、以下のようにブートストラップします：</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">~/samples/jruby/substruct_rel_1-0-a3 &gt;~/tesbted/jruby-1.1.2/bin/jruby -S rake substruct:db:bootstrap
(in /Users/arungupta/samples/jruby/substruct_rel_1-0-a3)
Checking requirements...
Initializing database...
[SUBSTRUCT WARNING]
Mail server settings have not been initialized.
Check to make sure they've been set in the admin panel.
-- create_table("content_nodes", {:force=&gt;true})
   -&gt; 0.3020s
-- add_index("content_nodes", ["name"], {:name=&gt;"name"})
   -&gt; 0.0140s
-- add_index("content_nodes", ["type", "id"], {:name=&gt;"type"})
. . .
-- initialize_schema_information()
   -&gt; 0.0200s
-- columns("schema_info")
   -&gt; 0.0650s
Clearing previous data...
Removing all sessions...
Loading default data...
...done.
================================================================================

Thanks for trying Substruct 1.0.a3

Now you can start the application with 'script/server'
visit: http://localhost:3000/admin, and log in with admin / admin.

For help, visit the following:
  Official Substruct Sites
    - http://substruct.subimage.com
    - http://code.google.com/p/substruct/
  Substruct Google Group - http://groups.google.com/group/substruct

- Subimage LLC - http://www.subimage.com</pre> 
       </div> 
      </div>
     </div> <p>5. では、 GlassFish 上でアプリケーションを実行してみましょう：</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">~/samples/jruby &gt;~/testbed/jruby-1.1.2/bin/jruby -S glassfish_rails substruct_rel_1-0-a3
May 28, 2008 1:47:46 PM com.sun.enterprise.glassfish.bootstrap.ASMain main
INFO: Launching GlassFish on HK2 platform
May 28, 2008 1:47:46 PM com.sun.enterprise.glassfish.bootstrap.ASMainHK2 findDerbyClient
INFO: Cannot find javadb client jar file, jdbc driver not available
May 28, 2008 1:47:47 PM com.sun.enterprise.v3.services.impl.GrizzlyProxy start
INFO: Listening on port 3000
May 28, 2008 1:47:47 PM com.sun.enterprise.v3.services.impl.GrizzlyEmbeddedHttpConfigurator configureSSL
WARNING: pewebcontainer.all_ssl_protocols_disabled
May 28, 2008 1:47:47 PM com.sun.enterprise.v3.services.impl.GrizzlyEmbeddedHttpConfigurator configureSSL
WARNING: pewebcontainer.all_ssl_ciphers_disabled
May 28, 2008 1:47:47 PM com.sun.enterprise.v3.services.impl.GrizzlyProxy start
INFO: Listening on port 3131
May 28, 2008 1:47:47 PM com.sun.enterprise.v3.services.impl.GrizzlyProxy start
INFO: Listening on port 3838
May 28, 2008 1:47:48 PM com.sun.enterprise.v3.admin.adapter.AdminConsoleAdapter setContextRoot
INFO: Admin Console Adapter: context root: /admin
May 28, 2008 1:47:48 PM com.sun.enterprise.rails.RailsDeployer registerAdapter
INFO: Loading application substruct_rel_1-0-a3 at /
May 28, 2008 1:47:48 PM 
INFO: Starting Rails instances
May 28, 2008 1:47:56 PM com.sun.grizzly.jruby.RubyObjectPool$1 run
INFO: Rails instance instantiation took : 8800ms
May 28, 2008 1:47:56 PM com.sun.enterprise.v3.server.AppServerStartup run
INFO: Glassfish v3 started in 10403 ms</pre> 
       </div> 
      </div>
     </div> <p>Welcome スクリーンショットは次のように表示されます。<br> <span class="error">Cannot resolve external resource into attachment.</span></p> <p>ここで、 <span class="error">Cannot resolve external resource into attachment.</span> をアプリケーションの "public/images" ディレクトリにコピーし、 "app/views/layouts/main.rhtml" ファイル （ 36 行目あたり）に以下のように追記してください：</p> 
     <div class="code panel" style="border-width: 1px;">
      <div class="codeContent panelContent"> 
       <div id="root"> 
        <pre class="theme: Confluence; brush: java; gutter: false">&lt;a href="http://glassfish.org"&gt;&lt;%= image_tag('/images/glassfish-logo.gif', :alt =&gt; 'GlassFish') %&gt;&lt;/a&gt;</pre> 
       </div> 
      </div>
     </div> <p>修正されたビューのコードは以下のようになります：<br> <span class="error">Cannot resolve external resource into attachment.</span></p> <p>以下が変更後の画面です：<br> <span class="error">Cannot resolve external resource into attachment.</span></p> <p>私が今回試した基本的な配備は、上手く動作しているようです。If you try slightly more advanced usecases then the functionality provided by <a href="http://wiki.rubyonrails.org/rails/pages/RedCloth">RedCloth</a>, <a href="http://rubyforge.org/projects/fastercsv/">fastercsv</a>, <a href="http://rubyforge.org/projects/mime-types">mime-types</a>, <a href="http://rubyforge.org/projects/mini-magick">mini_magick</a> and <a href="http://rubyforge.org/projects/ezcrypto">ezcrypto gems</a> can be exercised as well. If you are running Substruct, try it and <span class="error">[let us know]</span>.</p> <p>Rails アプリケーションが GlassFish gem 上で正しく動作しない場合は、サブコンポーネントに "jruby" を選択して<a href="https://glassfish.java.net/issues/enter_bug.cgi?issue_type=DEFECT">ここからバグを報告してください</a> （デフォルトのバージョンは "v3" です）。</p> <p>この記事とあわせて、 <a href="http://blogs.oracle.com/arungupta/entry/redmine_on_glassfish_ruby_on">Redmine</a> on <a href="Redmine_on_glassfish_1Ja.html" title="Redmine_on_glassfish_1Ja">GlassFish v3</a> もぜひご覧ください。</p> 
     <hr> <p>日本語翻訳: <a href="http://apercu-j.blogspot.com/">Kana</a></p> <p><a href="http://blogs.oracle.com/arungupta/date/20080630">英文</a></p> 
     <hr> </td> 
   </tr> 
  </tbody>
 </table>    
</body></div>
        <br/>

        <!-- footer================================================== -->
        <footer class="well">
            <div class="container">

                <div class="row-fluid" id="bottom-info">
                    <!--div class="span6 pagination-centered" id="social"-->
                    <div class="span4" id="social">			
                        <a href="http://blogs.oracle.com/theaquarium/"><img src="../images/icons/TheAquarium.png"></a>
                        <a href="https://twitter.com/glassfish"><img src="../images/icons/twitter.png"></a>
                        <a href="https://plus.google.com/communities/106098646151660933759"><img src="../images/icons/google.png"></a>
                        <a href="http://www.linkedin.com/groups/GlassFish-Users-106819/about"><img src="../images/icons/linkedin.png"></a>
                        <a href="http://www.youtube.com/user/GlassFishVideos"><img src="../images/icons/youtube.png"></a>
                        <a href="https://www.facebook.com/GlassFish"><img src="../images/icons/facebook.png"></a>
                    </div>

                    <div class="span8" id="copyright">Page last changed on Jul 08, 2010 by 
<font color="#0050B2">am74686</font>. Exported from wikis.oracle.com on May 27, 2015 20:47.<br/>
                        Copyright &copy; 2005-2015 Oracle Corporation and/or its affiliates.</div>
                </div>
            </div>
        </footer>

        <!-- ================================================== -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/bootstrap-tab.js"></script>
	<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<!--  Begin SiteCatalyst code  -->
  	<!--  End SiteCatalyst code  -->
    </body>
</html>