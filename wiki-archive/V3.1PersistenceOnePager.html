<!DOCTYPE html>
<html  xml:lang="en" lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>GlassFish Wiki : V3.1PersistenceOnePager</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta http-equiv="content-language" content="en" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
        <link href="styles/docs.css" rel="stylesheet" />
        <link href="styles/site1.css" rel="stylesheet" />
        <style> a { color: #555555; } </style>
        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body class="page-documentation project-gfmvnsite" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="brand"><a href="/glassfish/index.html"><img src="../images/gflogo24.png"><span style="color:#E88A43;font-size:18px;padding-left:11px;padding-top:15px;font-weight:bold;">GlassFish</span> - <span style="font-size:18px;" class="gf-grey">World's first Java EE 7 Application Server</span></a></div>
                    <div class="nav-collapse">
                        <ul class="nav pull-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
									<li><a href="/glassfish/LICENSE" title="License">Legal </a></li>
									<li><a href="/glassfish/CONTRIBUTING" title="Contributing">Contributing </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <br/><br/>
        <div class="container"><body> 
 <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff"> 
  <tbody>
   <tr> 
    <td valign="top" class="pagebody">   <h4><a name="V3.1PersistenceOnePager-GlassFishServerOpenSourceEdition3.1PersistenceOnePager"></a>GlassFish Server Open Source Edition 3.1 - Persistence One Pager</h1> <style type="text/css">/*<![CDATA[*/
div.rbtoc1278803217402 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1278803217402 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1278803217402 li {margin-left: 0px;padding-left: 0px;}

/*]] >*/</style>
     <div class="rbtoc1278803217402"> 
      <ul> 
       <li><a href="#V3.1PersistenceOnePager-GlassFishServerOpenSourceEdition3.1PersistenceOnePager">GlassFish Server Open Source Edition 3.1 - Persistence One Pager</a></li> 
       <li><a href="#V3.1PersistenceOnePager-1.Introduction">1. Introduction</a></li> 
       <ul> 
        <li><a href="#V3.1PersistenceOnePager-1.1.Project%2FComponentWorkingName%3A">1.1. Project/Component Working Name:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-1.2.Name%28s%29andemailaddressofDocumentAuthor%28s%29%2FSupplier%3A">1.2. Name(s) and e-mail address of Document Author(s)/Supplier:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-1.3.DateofThisDocument%3A">1.3. Date of This Document:</a></li> 
       </ul> 
       <li><a href="#V3.1PersistenceOnePager-2.ProjectSummary">2. Project Summary</a></li> 
       <ul> 
        <li><a href="#V3.1PersistenceOnePager-2.1.ProjectDescription%3A">2.1. Project Description:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-2.2.RisksandAssumptions%3A">2.2. Risks and Assumptions:</a></li> 
       </ul> 
       <li><a href="#V3.1PersistenceOnePager-3.ProblemSummary">3. Problem Summary</a></li> 
       <ul> 
        <li><a href="#V3.1PersistenceOnePager-3.1.ProblemArea%3A">3.1. Problem Area:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-3.2.Justification%3A">3.2. Justification:</a></li> 
       </ul> 
       <li><a href="#V3.1PersistenceOnePager-4.TechnicalDescription%3A">4. Technical Description:</a></li> 
       <ul> 
        <li><a href="#V3.1PersistenceOnePager-4.1.Details%3A">4.1. Details:</a></li> 
        <ul> 
         <li><a href="#V3.1PersistenceOnePager-4.1.1UpgradeEclipseLinktov2.1">4.1.1 Upgrade EclipseLink to v2.1</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.1.2ProvidebetterdeveloperexperienceforEmbeddedusecase">4.1.2 Provide better developer experience for Embedded use case</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.1.3Renamesundeploymentdescriptorforcmptoglassfish">4.1.3 Rename sun-* deployment descriptor for cmp to glassfish-*</a></li> 
        </ul> 
        <li><a href="#V3.1PersistenceOnePager-4.2.Bug%2FRFENumber%28s%29%3A">4.2. Bug/RFE Number(s):</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.3.InScope%3A">4.3. In Scope:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.4.OutofScope%3A">4.4. Out of Scope:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.5.Interfaces%3A">4.5. Interfaces:</a></li> 
        <ul> 
         <li><a href="#V3.1PersistenceOnePager-4.5.1PublicInterfaces">4.5.1 Public Interfaces</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.5.2PrivateInterfaces">4.5.2 Private Interfaces</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.5.3Deprecated%2FRemovedInterfaces%3A">4.5.3 Deprecated/Removed Interfaces:</a></li> 
        </ul> 
        <li><a href="#V3.1PersistenceOnePager-4.6.DocImpact%3A">4.6. Doc Impact:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.7.Admin%2FConfigImpact%3A">4.7. Admin/Config Impact:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.8.HAImpact%3A">4.8. HA Impact:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.9.I18N%2FL10NImpact%3A">4.9. I18N/L10N Impact:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.10.Packaging%2CDelivery%26Upgrade%3A">4.10. Packaging, Delivery &amp; Upgrade:</a></li> 
        <ul> 
         <li><a href="#V3.1PersistenceOnePager-4.10.1.Packaging">4.10.1. Packaging</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.10.2.Delivery">4.10.2. Delivery</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.10.3.UpgradeandMigration%3A">4.10.3. Upgrade and Migration:</a></li> 
        </ul> 
        <li><a href="#V3.1PersistenceOnePager-4.11.SecurityImpact%3A">4.11. Security Impact:</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.12.CompatibilityImpact">4.12. Compatibility Impact</a></li> 
        <li><a href="#V3.1PersistenceOnePager-4.13.Dependencies%3A">4.13. Dependencies:</a></li> 
        <ul> 
         <li><a href="#V3.1PersistenceOnePager-4.13.1InternalDependencies">4.13.1 Internal Dependencies</a></li> 
         <li><a href="#V3.1PersistenceOnePager-4.13.2ExternalDependencies">4.13.2 External Dependencies</a></li> 
        </ul> 
        <li><a href="#V3.1PersistenceOnePager-4.14.TestingImpact%3A">4.14. Testing Impact:</a></li> 
       </ul> 
       <li><a href="#V3.1PersistenceOnePager-5.ReferenceDocuments%3A">5. Reference Documents:</a></li> 
       <li><a href="#V3.1PersistenceOnePager-6.Schedule%3A">6. Schedule:</a></li> 
       <ul> 
        <li><a href="#V3.1PersistenceOnePager-6.1.ProjectedAvailability%3A">6.1. Projected Availability:</a></li> 
       </ul> 
      </ul>
     </div> <h4><a name="V3.1PersistenceOnePager-1.Introduction"></a>1. Introduction</h1> <h4><a name="V3.1PersistenceOnePager-1.1.Project%2FComponentWorkingName%3A"></a>1.1. Project/Component Working Name: </h2> <p>Persistence Services for GlassFish Server Open Source Edition 3.1</p> <h4><a name="V3.1PersistenceOnePager-1.2.Name%28s%29andemailaddressofDocumentAuthor%28s%29%2FSupplier%3A"></a>1.2. Name(s) and e-mail address of Document Author(s)/Supplier:</h2> <p>Mitesh Meswani: mitesh.meswani@oracle.com</p> <h4><a name="V3.1PersistenceOnePager-1.3.DateofThisDocument%3A"></a>1.3. Date of This Document:</h2> <p>05/19/2010</p> <h4><a name="V3.1PersistenceOnePager-2.ProjectSummary"></a>2. Project Summary</h1> <h4><a name="V3.1PersistenceOnePager-2.1.ProjectDescription%3A"></a>2.1. Project Description:</h2> <p>Persistence Services requirements for GlassFish Server Open Source Edition 3.1 include following</p> 
     <ul> 
      <li>Upgrade EclipseLink to v2.1</li> 
      <li>Provide better developer experience for Embedded use case</li> 
      <li>Rename sun-* deployment descriptor for cmp to glassfish-*</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-2.2.RisksandAssumptions%3A"></a>2.2. Risks and Assumptions:</h2> <p>Assumptions</p> 
     <ul> 
      <li>EclipseLink 2.1 will be available in time frame suitable for GlassFish Server Open Source Edition 3.1 (currently scheduled to be release on 06/23)</li> 
      <li>It would be possible to use mechanism defined in section 4.1.2 below to define datasource dynamically while running in embedded mode.</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-3.ProblemSummary"></a>3. Problem Summary</h1> <h4><a name="V3.1PersistenceOnePager-3.1.ProblemArea%3A"></a>3.1. Problem Area:</h2> <p>Provide persistence services for V3.1</p> <h4><a name="V3.1PersistenceOnePager-3.2.Justification%3A"></a>3.2. Justification:</h2> <p>Persistence is core component of GlassFish. </p> <h4><a name="V3.1PersistenceOnePager-4.TechnicalDescription%3A"></a>4. Technical Description:</h1> <h4><a name="V3.1PersistenceOnePager-4.1.Details%3A"></a>4.1. Details:</h2> <h4><a name="V3.1PersistenceOnePager-4.1.1UpgradeEclipseLinktov2.1"></a>4.1.1 Upgrade EclipseLink to v2.1</h3> <p>GlassFish V3 ships with EclipseLink 2.0. EclipseLink 2.1 contains many bug fixes to 2.0 and also implements advanced ORM/query features. We will integrate milestones from 2.1 stream as they are released.</p> <h4><a name="V3.1PersistenceOnePager-4.1.2ProvidebetterdeveloperexperienceforEmbeddedusecase"></a>4.1.2 Provide better developer experience for Embedded use case</h3> <p>While instantiating a Persistence Unit, if a jdbc resource is not specified in persistence.xml, it is defaulted to "jdbc/_default". This resource points to Derby running in network mode. Using it would require developer to have a Derby instance running in network mode. To facilitate better experience while unit testing etc, While running in embedded mode, we will change the default to jdbc resource pointing to embedded instance of Derby. We have two options for the resource that we can point to:</p> 
     <ol> 
      <li>We already have an embedded jdbc resource ("jdbc/_TimerPool")defined for ejb timers. We can reuse that or</li> 
      <li>Dynamically define a new jdbc resource "jdbc/_embedded_default" which points to a dynamically defined connection pool pointing to embedded derby and use that.</li> 
     </ol> <p>While option (1) above is convenient to implement, it might introduce some subtle behavior changes to code running in embedded mode in comparison to code running in full mode hence we will go with Option (2)</p> <p>We will use CommandRunner to execute create-jdbc-connection-pool and create-jdbc-resource respectively.</p> <h4><a name="V3.1PersistenceOnePager-4.1.3Renamesundeploymentdescriptorforcmptoglassfish"></a>4.1.3 Rename sun-* deployment descriptor for cmp to glassfish-*</h3> <p>cmp code needs to be upgraded to interpret glassfish-* deployment descriptors. </p> <h4><a name="V3.1PersistenceOnePager-4.2.Bug%2FRFENumber%28s%29%3A"></a>4.2. Bug/RFE Number(s):</h2> <h4><a name="V3.1PersistenceOnePager-4.3.InScope%3A"></a>4.3. In Scope:</h2> 
     <ul> 
      <li>Features described above</li> 
      <li>On going maintenance to persistence code</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-4.4.OutofScope%3A"></a>4.4. Out of Scope:</h2> 
     <ul> 
      <li>Any features not mentioned above</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-4.5.Interfaces%3A"></a>4.5. Interfaces:</h2> <h4><a name="V3.1PersistenceOnePager-4.5.1PublicInterfaces"></a>4.5.1 Public Interfaces</h3> <p>interface : javax.persistence (ver 2.0)<br> comments : From JSR 317</p> <h4><a name="V3.1PersistenceOnePager-4.5.2PrivateInterfaces"></a>4.5.2 Private Interfaces</h3> <p>None identified at this time</p> <h4><a name="V3.1PersistenceOnePager-4.5.3Deprecated%2FRemovedInterfaces%3A"></a>4.5.3 Deprecated/Removed Interfaces:</h3> <p>None identified at this time</p> <h4><a name="V3.1PersistenceOnePager-4.6.DocImpact%3A"></a>4.6. Doc Impact:</h2> <p>Docs will need to explain the default datasource used while running in embedded mode. </p> <h4><a name="V3.1PersistenceOnePager-4.7.Admin%2FConfigImpact%3A"></a>4.7. Admin/Config Impact:</h2> <p>None anticipated</p> <h4><a name="V3.1PersistenceOnePager-4.8.HAImpact%3A"></a>4.8. HA Impact:</h2> <p>None anticipated</p> <h4><a name="V3.1PersistenceOnePager-4.9.I18N%2FL10NImpact%3A"></a>4.9. I18N/L10N Impact:</h2> <p>None anticipated</p> <h4><a name="V3.1PersistenceOnePager-4.10.Packaging%2CDelivery%26Upgrade%3A"></a>4.10. Packaging, Delivery &amp; Upgrade:</h2> <h4><a name="V3.1PersistenceOnePager-4.10.1.Packaging"></a>4.10.1. Packaging</h3> <p>The current packaging structure should suffice for these changes.</p> <h4><a name="V3.1PersistenceOnePager-4.10.2.Delivery"></a>4.10.2. Delivery</h3> <p>The current delivery mechanism should suffice for these changes.</p> <h4><a name="V3.1PersistenceOnePager-4.10.3.UpgradeandMigration%3A"></a>4.10.3. Upgrade and Migration:</h3> <p>No impact anticipated. </p> <h4><a name="V3.1PersistenceOnePager-4.11.SecurityImpact%3A"></a>4.11. Security Impact:</h2> <p>None anticipated.</p> <h4><a name="V3.1PersistenceOnePager-4.12.CompatibilityImpact"></a>4.12. Compatibility Impact</h2> <p>None anticipated.</p> <h4><a name="V3.1PersistenceOnePager-4.13.Dependencies%3A"></a>4.13. Dependencies:</h2> <h4><a name="V3.1PersistenceOnePager-4.13.1InternalDependencies"></a>4.13.1 Internal Dependencies </h3> 
     <ul> 
      <li>Changes to Connector module for @DSD and to allow definition of a datasource dynamically</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-4.13.2ExternalDependencies"></a>4.13.2 External Dependencies </h3> 
     <ul> 
      <li>EclipseLink V2.1 released under EDL.</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-4.14.TestingImpact%3A"></a>4.14. Testing Impact:</h2> 
     <ul> 
      <li>Existing tests from V3 will be resused to check for potential regression with new version of EclipseLink</li> 
      <li>New automated tests will be developed with SQE to test support for @DSD and new default for Embedded mode.</li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-5.ReferenceDocuments%3A"></a>5. Reference Documents:</h1> 
     <ul> 
      <li><a href="http://www.eclipse.org/projects/project-plan.php?planurl=http://www.eclipse.org/eclipselink/project-info/plans/2_1_0.xml">EclipseLink 2.1 plans</a></li> 
      <li><a href="http://wiki.eclipse.org/EclipseLink/Release/2.1.0">EclipseLink 2.1 features</a></li> 
     </ul> <h4><a name="V3.1PersistenceOnePager-6.Schedule%3A"></a>6. Schedule:</h1> <h4><a name="V3.1PersistenceOnePager-6.1.ProjectedAvailability%3A"></a>6.1. Projected Availability:</h2> <p>See the project page <a href="3.1Persistence.html" title="3.1Persistence">here</a></p> 
     <hr> </td> 
   </tr> 
  </tbody>
 </table>    
</body></div>
        <br/>

        <!-- footer================================================== -->
        <footer class="well">
            <div class="container">

                <div class="row-fluid" id="bottom-info">
                    <!--div class="span6 pagination-centered" id="social"-->
                    <div class="span4" id="social">			
                        <a href="http://blogs.oracle.com/theaquarium/"><img src="../images/icons/TheAquarium.png"></a>
                        <a href="https://twitter.com/glassfish"><img src="../images/icons/twitter.png"></a>
                        <a href="https://plus.google.com/communities/106098646151660933759"><img src="../images/icons/google.png"></a>
                        <a href="http://www.linkedin.com/groups/GlassFish-Users-106819/about"><img src="../images/icons/linkedin.png"></a>
                        <a href="http://www.youtube.com/user/GlassFishVideos"><img src="../images/icons/youtube.png"></a>
                        <a href="https://www.facebook.com/GlassFish"><img src="../images/icons/facebook.png"></a>
                    </div>

                    <div class="span8" id="copyright">Page last changed on Jul 10, 2010 by 
<font color="#0050B2">am74686</font>. Exported from wikis.oracle.com on May 27, 2015 20:47.<br/>
                        Copyright &copy; 2005-2015 Oracle Corporation and/or its affiliates.</div>
                </div>
            </div>
        </footer>

        <!-- ================================================== -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/bootstrap-tab.js"></script>
	<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<!--  Begin SiteCatalyst code  -->
  	<!--  End SiteCatalyst code  -->
    </body>
</html>