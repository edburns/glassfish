<!DOCTYPE html>
<html  xml:lang="en" lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>GlassFish Wiki : V3webtierFunctionalSpec</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta http-equiv="content-language" content="en" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
        <link href="styles/docs.css" rel="stylesheet" />
        <link href="styles/site1.css" rel="stylesheet" />
        <style> a { color: #555555; } </style>
        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body class="page-documentation project-gfmvnsite" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="brand"><a href="/glassfish/index.html"><img src="../images/gflogo24.png"><span style="color:#E88A43;font-size:18px;padding-left:11px;padding-top:15px;font-weight:bold;">GlassFish</span> - <span style="font-size:18px;" class="gf-grey">World's first Java EE 7 Application Server</span></a></div>
                    <div class="nav-collapse">
                        <ul class="nav pull-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
									<li><a href="/glassfish/LICENSE" title="License">Legal </a></li>
									<li><a href="/glassfish/CONTRIBUTING" title="Contributing">Contributing </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <br/><br/>
        <div class="container"><body> 
 <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff"> 
  <tbody>
   <tr> 
    <td valign="top" class="pagebody">   <h4><a name="V3webtierFunctionalSpec-WebtierOnePager"></a>Webtier One Pager</h1> <p>[</p> 
     <div class="error">
      <span class="error">Unknown macro: {TableOfContents title='Webtier '}</span> 
     </div> <p>|(TableOfContentstitle='Webtier')]</p> <h4><a name="V3webtierFunctionalSpec-1.Introduction"></a>1. Introduction</h1> <h4><a name="V3webtierFunctionalSpec-1.1.Project%2FComponentWorkingName%3A"></a>1.1. Project/Component Working Name: </h2> <p>GlassFish Webtier </p> <h4><a name="V3webtierFunctionalSpec-1.2.Name%28s%29andemailaddressofDocumentAuthor%28s%29%2FSupplier%3A"></a>1.2. Name(s) and e-mail address of Document Author(s)/Supplier:</h2> <p>The individual who are wrote this document</p> <p>Rajiv Mordani (Rajiv.Mordani@sun.com)</p> <h4><a name="V3webtierFunctionalSpec-1.3.DateofThisDocument%3A"></a>1.3. Date of This Document:</h2> <p>06/30/2008</p> <h4><a name="V3webtierFunctionalSpec-2.ProjectSummary"></a>2. Project Summary</h1> <h4><a name="V3webtierFunctionalSpec-2.1.ProjectDescription%3A"></a>2.1. Project Description:</h2> <p>The webtier for GlassFish v3 Prelude is based on the Java EE 5 specifications<br> namely Servlet 2.5, JSP 2.1, JSTL 1.1 and JSF 1.2. In addition to the main<br> specifications the implementation will also provide support for new web<br> 2.0 features like Comet and AJAX.</p> <p>See below for a longer, more detailed technical description.</p> <h4><a name="V3webtierFunctionalSpec-2.2.RisksandAssumptions%3A"></a>2.2. Risks and Assumptions:</h2> <p>The risks associated with this release are the resources needed to<br> implement monitoring support in the webtier. It also poses some amount<br> of risk to the work that needs to be done for Java EE 6 implementation.</p> <h4><a name="V3webtierFunctionalSpec-3.ProblemSummary"></a>3. Problem Summary</h1> <h4><a name="V3webtierFunctionalSpec-3.1.ProblemArea%3A"></a>3.1. Problem Area:</h2> <p>What problem or need does this project solve?<br> The core part of the v3 Prelude release is the web container and it's<br> associate pieces. The container needs to be competitive with some of<br> the other light weight containers like Tomcat and Jetty. Also the<br> support for scripting languages that help build web applications using<br> these languages on top of GlassFish / Java VM are gaining popularity<br> and need to be supported.</p> <p>In addition to being part of the v3 Prelude release a separate but<br> related goal is to make the web container embeddable so that<br> applications can bundle a web container without having to worry too<br> much about the size of the container.</p> <h4><a name="V3webtierFunctionalSpec-3.2.Justification%3A"></a>3.2. Justification:</h2> <p>Why is it important to do this project?<br> The webtier projects provide the core web container of Java EE 5 and<br> support for web 2.0 style of programming.</p> <h4><a name="V3webtierFunctionalSpec-4.TechnicalDescription%3A"></a>4. Technical Description:</h1> <h4><a name="V3webtierFunctionalSpec-4.1.Details%3A"></a>4.1. Details:</h2> <p>Since forking from Tomcat to create the GlassFish webtier there is a<br> lot of legacy code from Tomcat that is carried forward but never really<br> used in GlassFish. As part of an effort to clean up the code and make<br> the web container embeddable there is effort on the way to refactor the<br> web container. Following are the high level list of things that are<br> being targeted for web container for v3 Prelude release.</p> 
     <ul> 
      <li>Web container refactoring 
       <ul> 
        <li>Separate core servlet container into new web-core module</li> 
        <li>Remove dependency of web-core on com.sun renamed Apache commons modules</li> 
        <li>Remove dependency of web-core on commons-logging from servlet container</li> 
        <li>Remove dependency of web-core on commons-logging from Jasper</li> 
        <li>Remove dependency of web-core on commons-modeler</li> 
        <li>Remove connector related code duplication in web-core and Grizzly</li> 
        <li>Remove request double-mapping</li> 
        <li>Remove dependency of Jasper on GlassFish API 
         <ul> 
          <li>Restore setDtdResourcePrefix(), setSchemaResourcePrefix(), and MyEntityResolver in org.apache.jasper.xmlparser.ParserUtils</li> 
          <li>Add setEntityResolver() to org.apache.jasper.xmlparser.ParserUtils</li> 
         </ul> </li> 
       </ul> </li> 
     </ul> 
     <ul> 
      <li>Separate java.net projects JSTL, EL and JSP 
       <ul> 
        <li>OSGi binary bundles will be integrated into GlassFish.</li> 
       </ul> </li> 
     </ul> 
     <ul> 
      <li>Tomcat alignment 
       <ul> 
        <li>Support for Tomcat valve in addition to the flattened valve architecture in GlassFish</li> 
        <li>Relevant bug fixes from Tomcat will also be ported over.</li> 
        <li>Support for latest version of mod_jk will be available</li> 
        <li>WebDAV, SSI and CGI support.</li> 
       </ul> </li> 
     </ul> 
     <ul> 
      <li>Advanced features 
       <ul> 
        <li>Dynamic reconfiguration, which was available in v2 but didn't make it into the TP2 release of GlassFish v3 will be done in time for the v3 Prelude release.</li> 
        <li>Monitoring support</li> 
        <li>Changes for Grizzly config. See <a href="./GrizzlyConfigOnePager.html">Grizzly config</a> one pager.</li> 
       </ul> </li> 
     </ul> 
     <ul> 
      <li>Comet support via Atmosphere (a sub-project of Grizzly) will also be available.</li> 
     </ul> 
     <ul> 
      <li>JSF 1.2 will be integrated into v3 Prelude. There aren't any new features being added for the release. Mostly just bug fixes.</li> 
     </ul> 
     <ul> 
      <li>For scripting support see the <a href="http://wiki.glassfish.java.net/attach/V3FunctionalSpecs/scripting-onepager.html">Scripting one pager</a></li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-4.2.Bug%2FRFENumber%28s%29%3A"></a>4.2. Bug/RFE Number(s):</h2> <h4><a name="V3webtierFunctionalSpec-4.3.InScope%3A"></a>4.3. In Scope:</h2> <h4><a name="V3webtierFunctionalSpec-4.4.OutofScope%3A"></a>4.4. Out of Scope:</h2> <p>Tomcat style of directory deployment under a special directory like "webapps" is not targeted for the v3 Prelude release.</p> <h4><a name="V3webtierFunctionalSpec-4.5.Interfaces%3A"></a>4.5. Interfaces:</h2> <p>Servlet 2.5: Committed<br> JSP 2.1: Committed<br> JSTL 1.1: Committed<br> EL 1.1: Committed<br> JSF 1.2: Committed<br> Atmosphere: Volatile. (Put pointer to Javadocs)<br> Valve: Committed</p> <h4><a name="V3webtierFunctionalSpec-4.5.1ExportedInterfaces"></a>4.5.1 Exported Interfaces</h3> <p>Disclose all interfaces that this project exports.</p> 
     <ul> 
      <li>Interface: Atmosphere</li> 
      <li>Stability: Volatile</li> 
      <li>Former Stability (if changing): N/A</li> 
      <li>Comments:</li> 
     </ul> 
     <ul> 
      <li>Interface: Grizzly Config</li> 
      <li>Stability: Volatile</li> 
      <li>Former Stability (if changing): N/A (previously mostly properties in domain.xml)</li> 
      <li>Comments:</li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-4.5.2Importedinterfaces"></a>4.5.2 Imported interfaces</h3> <p>Disclose interfaces this project imports. </p> 
     <ul> 
      <li>Interface: GlassFish API</li> 
      <li>Stability: Committed (need to double check)</li> 
      <li>Exporting Project: Name, Specification or other Link.</li> 
      <li>Comments:</li> 
     </ul> 
     <ul> 
      <li>Interface: Monitoring framework (gProbes)</li> 
      <li>Stability: Committed</li> 
      <li>Exporting Project: Name, Specification or other Link.</li> 
      <li>Comments:</li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-4.5.3Otherinterfaces%28Optional%29"></a>4.5.3 Other interfaces (Optional)</h3> <p>Any private interfaces that may be of interest?</p> 
     <ul> 
      <li>Interface:</li> 
      <li>Stability:</li> 
      <li>Exporting Project: Name, Specification or other Link.</li> 
      <li>Comments:</li> 
     </ul> 
     <ul> 
      <li>Interface:</li> 
      <li>Stability:</li> 
      <li>Exporting Project: Name, Specification or other Link.</li> 
      <li>Comments:</li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-4.6.DocImpact%3A"></a>4.6. Doc Impact:</h2> <p>In addition to documenting standard features that are part of the Java EE specification, the documentation should also cover AJAX via jMaki and JSF, Comet features, use of mod_jk, WebDAV, SSI and CGI features that will be available in the v3 Prelude release.</p> <h4><a name="V3webtierFunctionalSpec-4.7.Admin%2FConfigImpact%3A"></a>4.7. Admin/Config Impact:</h2> <p>How will this change impact the administration of the product?</p> <p>Dynamic reconfiguration support via admin console. Already planned. Please see the admin one pager.</p> <h4><a name="V3webtierFunctionalSpec-4.8.HAImpact%3A"></a>4.8. HA Impact:</h2> <p>What new requirements does this proposal place on the High Availability or Clustering aspects of the component?</p> <h4><a name="V3webtierFunctionalSpec-4.9.I18N%2FL10NImpact%3A"></a>4.9. I18N/L10N Impact:</h2> <p>Does this proposal impact internationalization or localization?</p> <h4><a name="V3webtierFunctionalSpec-4.10.Packaging%26Delivery%3A"></a>4.10. Packaging &amp; Delivery:</h2> <p>What packages, clusters or metaclusters does this proposal impact? What is its impact on install/upgrade?</p> <h4><a name="V3webtierFunctionalSpec-4.11.SecurityImpact%3A"></a>4.11. Security Impact:</h2> <p>How does this proposal interact with security-related APIs or interfaces? Does it rely on any Java policy or platform user/permissions implication? If the feature exposes any new ports, Or any similar communication points which may have security implications, note these here.</p> <h4><a name="V3webtierFunctionalSpec-4.12.CompatibilityImpact"></a>4.12. Compatibility Impact</h2> 
     <ul> 
      <li>Grizzly configuration, which is new, can now live in a separate file is replacing some of the properties that existed in GlassFish v2. The new elements in Grizzly configuration will be the recommended way. No decision is made yet about supporting the properties that were used in GlassFish v2 to enable Comet features using Grizzly.</li> 
     </ul> 
     <ul> 
      <li>Appserver 8.x changed Tomcat's &lt;code&gt;org.apache.catalina.Valve&lt;/code&gt; interface to reduce the number of frames on the stack when processing a web request and invoking a servlet: Instead of having one valve in the pipeline invoke the next valve, the container became responsible for invoking one valve at a time, and deciding whether to invoke the next valve by examining the return value of the current valve invocation. See <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4665318">CR 4665318</a> for details. The change to the &lt;code&gt;Valve&lt;/code&gt; interface was considered an implementation detail, because the appserver did not support adding custom valves. GlassFish V2 has allowed developers to add their own custom valves, by specifying the class names of their valves as &lt;code&gt;virtual-server&lt;/code&gt; or &lt;code&gt;web-module&lt;/code&gt; properties in &lt;code&gt;domain.xml&lt;/code&gt;, or as properties within their webapp's &lt;code&gt;sun-web.xml&lt;/code&gt; descriptor. The specified valves would have to implement the modified &lt;code&gt;Valve&lt;/code&gt; interface from GlassFish instead of that from Tomcat. Develpers who wanted to migrate from Tomcat to GlassFish would have to convert their valves by following these <a href="./FaqTomcatValveConversion.html">instructions</a>. In order to better align with Tomcat, GlassFish V3 is going to rename the GlassFish &lt;code&gt;Valve&lt;/code&gt; interface and change &lt;code&gt;org.apache.catalina.Valve&lt;/code&gt; to match the Tomcat definition. All GlassFish container implementation valves will be turned into hybrid valves that implement both the GlassFish &lt;code&gt;Valve&lt;/code&gt; interface as well as the latest &lt;code&gt;Valve&lt;/code&gt; interface from Tomcat, so they may be invoked both in a stacked as well as in the more optimal flattened fashion (they will be invoked in the flattened fashion as long as no developer valves have been configured). This means that any developer valves configured in GlassFish V2 (that implement the GlassFish &lt;code&gt;Valve&lt;/code&gt; interface) will no longer work in V3, and will have to be adjusted to implement the latest Tomcat &lt;code&gt;Valve&lt;/code&gt; interface. This seems acceptable because we have not heard of any developers who have actually implemented the modified GlassFish &lt;code&gt;Valve&lt;/code&gt; interface. On the other hand, there is a large developer base that has implemented valves using the Tomcat definition, and it is important that V3 support those developers.</li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-4.13.Dependencies%3A"></a>4.13. Dependencies:</h2> 
     <ul> 
      <li>Monitoring framework - gProbes</li> 
      <li>Admin for dynamic reconfiguration</li> 
      <li>GlassFish API for the embeddable web container</li> 
     </ul> <h4><a name="V3webtierFunctionalSpec-5.ReferenceDocuments%3A"></a>5. Reference Documents:</h1> <p>List of related documents, if any (BugID's, RFP's, papers).</p> <p>Explain how/where to obtain the documents, and what each contains, not just their titles. </p> <h4><a name="V3webtierFunctionalSpec-6.Schedule%3A"></a>6. Schedule:</h1> <h4><a name="V3webtierFunctionalSpec-6.1.ProjectedAvailability%3A"></a>6.1. Projected Availability:</h2> <p>Aligned with the GlassFish v3 Prelude release.</p> 
     <hr> <br> 
     <div class="tabletitle"> 
      <a name="attachments"> <h4>Attachments:</h2> </a> 
     </div> 
     <div class="greybox" align="left"> 
      <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""> 
      <a href="http://download.java.net/glassfish/wiki-archive/attachments/20873547/21364750.pdf">ValveAlignment.pdf</a> (application/pdf) 
      <br> 
     </div> </td> 
   </tr> 
  </tbody>
 </table>    
</body></div>
        <br/>

        <!-- footer================================================== -->
        <footer class="well">
            <div class="container">

                <div class="row-fluid" id="bottom-info">
                    <!--div class="span6 pagination-centered" id="social"-->
                    <div class="span4" id="social">			
                        <a href="http://blogs.oracle.com/theaquarium/"><img src="../images/icons/TheAquarium.png"></a>
                        <a href="https://twitter.com/glassfish"><img src="../images/icons/twitter.png"></a>
                        <a href="https://plus.google.com/communities/106098646151660933759"><img src="../images/icons/google.png"></a>
                        <a href="http://www.linkedin.com/groups/GlassFish-Users-106819/about"><img src="../images/icons/linkedin.png"></a>
                        <a href="http://www.youtube.com/user/GlassFishVideos"><img src="../images/icons/youtube.png"></a>
                        <a href="https://www.facebook.com/GlassFish"><img src="../images/icons/facebook.png"></a>
                    </div>

                    <div class="span8" id="copyright">Page last changed on Jul 09, 2010 by 
<font color="#0050B2">am74686</font>. Exported from wikis.oracle.com on May 27, 2015 20:48.<br/>
                        Copyright &copy; 2005-2015 Oracle Corporation and/or its affiliates.</div>
                </div>
            </div>
        </footer>

        <!-- ================================================== -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/bootstrap-tab.js"></script>
	<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<!--  Begin SiteCatalyst code  -->
  	<!--  End SiteCatalyst code  -->
    </body>
</html>